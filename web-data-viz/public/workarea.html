<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="./imagens/SpecialE.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpecialE | Area de Trabalho</title>

    <link rel="stylesheet" href="./css/workarea.css">
    <script src="../js/sessao.js"></script>
    <script src="./../js/alerta.js"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
        rel="stylesheet">

    <!--FONT AWESOME-->
    <script src="https://kit.fontawesome.com/9f7414eb10.js" crossorigin="anonymous"></script>

    <!-- Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Barra de navegação -->
    <div id="navbar">
        <!-- Logo da barra de navegação -->
        <div id="nav_logo">
            <img id="logo" src="./imagens/SpecialE.png" alt="SpecialE" href="index.html">
        </div>
        <!-- Links de navegação -->
        <div id="nav_link">
            <a id="link_home" class="link" href="index.html">SpecialE</a>
            <a id="link_servicos" class="link" href="assistente.html">Assistente</a>
            <a id="link_servicos" class="link" href="mural.html">Mural</a>
            <a id="link_home" class="link" href="dash.html">Dashboard</a>
            <a id="link_home" class="link" href="pre_quiz.html">Quiz</a>
            <a id="link_login" class="link-button" href="login.html">Login</a>
        </div>
    </div>

    <!-- Seção principal -->
    <section class="home">
        <!-- Primeira tela com imagem -->
        <div id="tela1">
            <p id="p_tela1">
                <img class="foto"
                    src="./imagens/dia-do-autismo-a-importancia-da-educacao-infantil-para-alunos-com-o-transtorno_g.png"
                    alt="imagem do autismo">
            </p>
        </div>

        <!-- Segunda tela com links para dashboards e mural -->
        <div id="tela2">
            <div class="left">
                <div class="desc_quiz">
                    <h1>Quiz do Projeto</h1>
                    <p>
                        O quiz do projeto é uma ferramenta interativa com dois questionários para entender os desafios na educação inclusiva. O primeiro foca em problemas como capacitação de profissionais, infraestrutura e metodologias de ensino. O segundo visa compreender as necessidades dos pais de crianças com necessidades especiais, coletando opiniões sobre o apoio necessário. Essa ferramenta coleta dados valiosos para formular estratégias e projetos eficazes, alinhando as soluções às necessidades da comunidade.
                    </p>
                </div>
                <div class="button_quiz"><a href="./quiz.html">Quiz</a></div>
            </div>
            <div class="right">
                <div class="desc_mural">
                    <h1>Mural</h1>
                    <p>O mural de avisos do projeto é uma plataforma dinâmica onde atualizações, notificações
                        importantes e mensagens podem ser compartilhadas com os usuários. Ele serve como um ponto
                        central de comunicação, garantindo que todos estejam informados sobre eventos, mudanças e outras
                        informações relevantes. O mural facilita a interação e mantém os usuários atualizados,
                        fortalecendo a comunidade em torno do seu projeto.</p>
                </div>
                <div class="button_mural"><a href="./mural.html">Mural</a></div>
            </div>
        </div>
    </section>
    

    <!-- Seção adicional -->
    <section class="hom">
        <!-- Ranking com quatro elementos -->
         <div class="esquerda">
        <div class="ranking">
            <div class="pr" id="rank1"></div>
            <div class="pr" id="rank2"></div>
            <div class="pr" id="rank3"></div>
            <div class="pr" id="rank4"></div>
        </div>
    </div>
    <div class="direita">
        <!-- Informações do gráfico -->
        <div class="chart-info">
            <div class="sim">
                <p id="sim-percentage">60%</p>
                <p>Sim</p>
            </div>
            <div class="nao">
                <p id="nao-percentage">40%</p>
                <p>Não</p>
            </div>
        </div>

        <div class="caixa_dash">
            <div class="right_dash">
                <div class="desc_dash">
                    <h1>Dashboard</h1>
                    <p>A dashboard do projeto apresenta dados e métricas essenciais de forma visual e interativa. Ela oferece uma visão geral de indicadores, como a taxa de conclusão do quiz e as porcentagens de respostas para cada pergunta. A dashboard facilita a análise rápida das informações, ajudando na tomada de decisões informadas e no monitoramento do desempenho do quiz e do mural de avisos. Ela pode ser personalizada para destacar as métricas mais relevantes para o seu projeto.</p>
                </div>
                <div class="button_dash"><a href="./dash.html">Dash</a></div>
            </div>
        </div>
    </div>
    </section>

    <!-- Rodapé -->
    <div id="footer">
        <div id="grupo">
            <!-- Informações de contato por e-mail -->
            <div id="email">
                <a href="mailto:luiz.cunha@sptech.school"><img src="imagens/o-email.png" alt="email"></a>
                <h2 class="tituloFooter">E-mail</h2>
                <p class="subtituloFooter">luiz.cunha@sptech.school</p>
            </div>
            <!-- LinkedIn -->
            <div id="linkedin">
                <a href="https://www.linkedin.com/in/luiz-gustavo-dantas-da-cunha-b23a601b5/"><img
                        src="imagens/logotipo-do-linkedin.png" alt="linkedin"></a>
                <h2 class="tituloFooter">LinkedIn</h2>
                <p class="subtituloFooter">@LuizGustavoDantas</p>
            </div>
            <!-- GitHub -->
            <div id="github">
                <a href="https://github.com/LuizCunha-G"><img src="imagens/github.png" alt="GitHub"></a>
                <h2 class="tituloFooter">Github</h2>
                <p class="subtituloFooter">@LuizCunha-G</p>
            </div>
        </div>
    </div>
</body>


</html>

<script>
    // Função para buscar e exibir o ranking
    function buscarRanking() {
        // Fazendo uma requisição GET para buscar as posições do ranking
        fetch("/result/buscandoQ1", {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
            }
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                // Se a resposta for bem-sucedida
                if (resposta.ok) {
                    // Converte a resposta em JSON
                    resposta.json().then(json => {
                        console.log(json);

                        // Atualiza os elementos do HTML com os dados recebidos
                        if (json.length >= 4) {
                            document.getElementById("rank1").innerHTML = json[0].categoria + ": " + json[0].respostas;
                            document.getElementById("rank2").innerHTML = json[1].categoria + ": " + json[1].respostas;
                            document.getElementById("rank3").innerHTML = json[2].categoria + ": " + json[2].respostas;
                            document.getElementById("rank4").innerHTML = json[3].categoria + ": " + json[3].respostas;
                        } else {
                            console.error("Número insuficiente de resultados recebidos");
                        }
                    });
                } else {
                    throw "Houve um erro ao tentar buscar o ranking!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });
    }

    // Chama a função buscarRanking quando a página é carregada
    document.addEventListener('DOMContentLoaded', buscarRanking);

    // Função para buscar e atualizar as porcentagens de "Sim" e "Não"
    function buscarPorcentagens() {
        // Fazendo uma requisição GET para buscar as contagens de respostas
        fetch("/result/buscandoQ2", {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
            }
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                // Se a resposta for bem-sucedida
                if (resposta.ok) {
                    // Converte a resposta em JSON
                    resposta.json().then(json => {
                        console.log(json);

                        // Calcula o total de respostas
                        const totalRespostas = json.reduce((acc, curr) => acc + curr.respostas, 0);
                        const simRespostas = json.find(item => item.categoria === 'Sim')?.respostas || 0;
                        const naoRespostas = json.find(item => item.categoria === 'Não')?.respostas || 0;

                        // Calcula as porcentagens de "Sim" e "Não"
                        const simPercentage = ((simRespostas / totalRespostas) * 100).toFixed(2) + '%';
                        const naoPercentage = ((naoRespostas / totalRespostas) * 100).toFixed(2) + '%';

                        // Atualiza os elementos do HTML com as porcentagens calculadas
                        document.getElementById("sim-percentage").innerHTML = simPercentage;
                        document.getElementById("nao-percentage").innerHTML = naoPercentage;
                    });
                } else {
                    throw "Houve um erro ao tentar buscar os dados!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });
    }

    // Chama a função buscarPorcentagens quando a página é carregada
    document.addEventListener('DOMContentLoaded', buscarPorcentagens);
</script>